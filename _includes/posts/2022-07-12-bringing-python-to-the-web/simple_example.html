<div id="load-simple-example" style="text-align: center;">
    <button onclick="loadExample()">Load Example</button>
    <div>
        <strong>Note that this may take some time and cause the page to freeze</strong>.
    </div>
</div>
<div id="simple-example" style="display: none;">

    <!-- <strong>Full source can be found <a
            href='https://github.com/karray/truepyxel/blob/master/pyodide.html'>here</a></strong> -->
    Output:
    <textarea id='output' style='width: 100%;' rows='10' disabled></textarea>
    <textarea id='code' rows='3'>
import numpy as np
np.ones((10,))
        </textarea>
    <button id='run' onclick='evaluatePython()'>Run</button>
    <div>You can execute any Python code. Just enter something in the box above and click the button. </div>

    <script type='text/javascript'>
        window.languagePluginUrl = 'https://pyodide-cdn2.iodide.io/v0.15.0/full/';

        const output = document.getElementById("output")
        const code = document.getElementById("code")

        function loadExample() {
            document.getElementById('load-simple-example').remove()
            let div = document.getElementById('simple-example')
            div.style.display = 'block'

            output.value = 'Initializing...\n'

            window.languagePluginUrl = 'https://pyodide-cdn2.iodide.io/v0.15.0/full/'

            let pyodide = document.createElement('script')
            pyodide.type = 'text/javascript'
            pyodide.addEventListener('load', function () {
                // init pyodide
                languagePluginLoader.then(() => { output.value += 'Ready!\n' })
            })
            pyodide.src = 'https://pyodide-cdn2.iodide.io/v0.15.0/full/pyodide.js'
            div.appendChild(pyodide)

        }

        function addToOutput(s) {
            output.value += `>>>${code.value}\n${s}\n`
            output.scrollTop = output.scrollHeight
            code.value = ''
        }



        function evaluatePython() {
            pyodide.runPythonAsync(code.value)
                .then(output => addToOutput(output))
                .catch((err) => { addToOutput(err) })
        }
    </script>
</div>