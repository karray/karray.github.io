<div>
    <script type="text/javascript">
        window.languagePluginUrl = 'https://pyodide-cdn2.iodide.io/v0.15.0/full/';
    </script>
    <script src="https://pyodide-cdn2.iodide.io/v0.15.0/full/pyodide.js"></script>


    <!-- <strong>Full source can be found <a
            href='https://github.com/karray/truepyxel/blob/master/pyodide.html'>here</a></strong> -->
            Output:
        <textarea id='output' style='width: 100%;' rows='10' disabled></textarea>
        <textarea id='code' rows='3'>
import numpy as np
np.ones((10,))
        </textarea>
        <button id='run' onclick='evaluatePython()'>Run</button>
        <div>You can execute any Python code. Just enter something in the box above and click the button. <strong>It can take some time</strong>.</div>
    
        <script>
            const output = document.getElementById("output")
            const code = document.getElementById("code")
    
            function addToOutput(s) {
                output.value += `>>>${code.value}\n${s}\n`
                output.scrollTop = output.scrollHeight
                code.value=''
            }
    
            output.value = 'Initializing...\n'
            // init pyodide
            languagePluginLoader.then(() => { output.value += 'Ready!\n' })
    
            function evaluatePython() {
                pyodide.runPythonAsync(code.value)
                    .then(output => addToOutput(output))
                    .catch((err) => { addToOutput(err) })
            }
        </script>
    </div>